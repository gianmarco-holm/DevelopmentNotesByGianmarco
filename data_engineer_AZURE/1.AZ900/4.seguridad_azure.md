# SEGURIDAD

## 1. Servicios de Seguridad de Azure
---

### **1.1. Azure Security**

Azure Security Center es un sistema de gestiÃ³n de seguridad de infraestructura unificada que refuerza la posiciÃ³n de seguridad de sus centros de datos y ofrece una protecciÃ³n contra amenazas muy avanzada, tanto para cargas de trabajo hÃ­bridas en la nube (estÃ©n o no en Azure), como en centros de datos locales. Azure ofrece este sistema como servicio dentro de su oferta.

**Funcionalidades de Azure Security Center**

Azure Security Center proporciona las funcionalidades principales siguientes:

* Cumplimiento de directivas. Security Center se sustenta sobre los controles de Azure Policy para que el usuario pueda configurar y supervisar sus directivas de forma que se ejecuten en grupos de administraciÃ³n, entre suscripciones e incluso para una organizaciÃ³n completa.
* Alertas de seguridad. Security Center recopila, analiza e integra de forma automÃ¡tica datos registrados de los recursos de Azure, como la protecciÃ³n de puntos de conexiÃ³n o firewall, para poder detectar amenazas reales. Con ello es posible mostrar la lista de alertas de seguridad priorizadas en Security Center junto con la informaciÃ³n necesaria para investigar y remediar rÃ¡pidamente cualquier ataque.
* PuntuaciÃ³n (scoring) de seguridad. Security Center evalÃºa continuamente los recursos en busca de problemas de seguridad y posteriormente agrega todos los resultados en una Ãºnica puntuaciÃ³n para que el usuario pueda conocer realmente su nivel de seguridad actual.
* ProtecciÃ³n de seguridad de recursos. Permitiendo la visibilidad de la seguridad y recomendaciones por recurso.

**Capacidades de Azure Security Center**

Las principales capacidades de Azure Security Center son:

* **Cumplimiento de directivas.** Permitiendo ejecutar directivas en grupos de administraciÃ³n, suscripciones u organizaciones.
* **Evaluaciones continuas.** Con el fin de asegurar que tanto los nuevos recursos como los ya implementados estÃ¡n configurados correctamente.
* **Recomendaciones personalizadas** basadas en cargas de trabajo reales con instrucciones sobre cÃ³mo implementarlas.
* **ProtecciÃ³n contra amenazas** mediante el anÃ¡lisis de los intentos de amenazas mediante alertas e informes de recursos afectados.

Azure Security Center estÃ¡ integrado con Azure Advisor para que este Ãºltimo servicio pueda presentar la informaciÃ³n relativa a seguridad y asÃ­ prevenir potenciales ataques.

### **1.2. Azure Sentinel**

Azure Sentinel es una soluciÃ³n de gestiÃ³n de la informaciÃ³n de seguridad (Security Information and Event Management, SIEM) y de respuesta automatizada de seguridad (Security Orchestration, Automation and Response, SOAR) que brinda anÃ¡lisis e inteligencia contra amenazas a nivel empresarial.

Sus principales funcionalidades son:

Recopilar datos de todos los usuarios, dispositivos, aplicaciones e infraestructuras, tanto locales como en diferentes nubes.
Detectar amenazas y disminuir los falsos positivos mediante anÃ¡lisis.
Investigar amenazas con inteligencia artificial y rastrear actividades sospechosas a escala.
Responder ante incidentes con la organizaciÃ³n y la automatizaciÃ³n integradas de tareas comunes.
Azure Sentinel estÃ¡ conectado e integrado con:

* Office 365.
* Azure Active Directory.
* Azure Advanced Threat Protection.
* Microsoft Cloud App Security.

### 1.3. Azure Key Vault

Azure Key Vault almacena los secretos de las aplicaciones en una ubicaciÃ³n centralizada en la nube y sirve para controlar de forma segura los permisos de acceso y el registro de acceso. Sus principales funcionalidades son:

* AdministraciÃ³n de secretos.
* AdministraciÃ³n de claves.
* AdministraciÃ³n de certificados.
* Almacenamiento de secretos respaldados por mÃ³dulos de seguridad de hardware (HSM).

### **1.4. Host dedicados en Azure**

El servicio Host dedicado de Azure proporciona servidores fÃ­sicos que alojan una o varias mÃ¡quinas virtuales y estÃ¡ dirigido a una Ãºnica suscripciÃ³n de Azure. Azure provee el servicio con los mismos servidores fÃ­sicos con los que proporciona recursos desde sus centros de datos.

Es posible aprovisionar hosts dedicados dentro de una regiÃ³n, zona de disponibilidad y dominio de error, de modo que se pueden ejecutar mÃ¡quinas virtuales directamente en sus hosts dedicados en la configuraciÃ³n que mejor se adapte a las necesidades del cliente.

Los beneficios que reporta su uso son:

* Aislamiento de hardware a nivel de servidor. Esto significa que no se colocarÃ¡n otras mÃ¡quinas virtuales en estos hosts. Los hosts dedicados comparten la misma red y la misma infraestructura de almacenamiento subyacente que otros hosts no aislados.
* Control sobre la programaciÃ³n de eventos de mantenimiento.
* Alineado con las ventajas hÃ­bridas de Azure. Con ello el cliente puede aportar sus propias licencias de Windows y SQL.

La limitaciÃ³n de este servicio es que no permite utilizar conjuntos de escalado de mÃ¡quinas virtuales.

## 2. Conectividad de Red Segura
---

### **2.1. Defensa en Profundidad**

La Defensa en Profundidad (Defense in Depth) en Azure es una estrategia de seguridad que protege los datos y sistemas mediante mÃºltiples capas de seguridad. La idea es que si un atacante logra superar una capa, todavÃ­a tendrÃ¡ que enfrentar muchas mÃ¡s antes de comprometer el sistema.

>ğŸ“Œ Ejemplo: Es como proteger un castillo con mÃºltiples muros, fosos, guardias y torres de vigilancia. Aunque un enemigo pase el primer muro, aÃºn tiene mÃ¡s obstÃ¡culos antes de llegar al castillo.

Microsoft define 7 capas en su modelo de Defensa en Profundidad para Azure:

#### **1ï¸âƒ£ Seguridad FÃ­sica**

Protege los centros de datos de Azure contra desastres naturales, ataques fÃ­sicos y accesos no autorizados.

Ejemplo: Vigilancia, control de acceso biomÃ©trico, sistemas contra incendios.

#### **2ï¸âƒ£ Seguridad de la Identidad y Accesos**

Controla quiÃ©n puede acceder a los recursos y quÃ© permisos tienen.

Ejemplo:
AutenticaciÃ³n multifactor (MFA) para evitar accesos no autorizados.
Azure AD (Active Directory) para gestionar usuarios y permisos.

#### **3ï¸âƒ£ Seguridad en la Periferia (Red)**

Protege las conexiones a Internet y entre redes internas.

Ejemplo:
Azure Firewall bloquea trÃ¡fico malicioso.
NSG (Network Security Groups) controla quÃ© trÃ¡fico puede entrar o salir.

#### **4ï¸âƒ£ Seguridad en la Red**

Protege las redes internas dentro de Azure.

Ejemplo:
SegmentaciÃ³n de redes con Azure Virtual Network (VNet).
VPNs cifradas para conexiones seguras.

#### **5ï¸âƒ£ Seguridad en la ComputaciÃ³n**

Protege las mÃ¡quinas virtuales (VMs) y contenedores.

Ejemplo:
Defender for Cloud para monitorear amenazas en servidores.
Actualizaciones automÃ¡ticas en VM para evitar vulnerabilidades.

#### **6ï¸âƒ£ Seguridad en las Aplicaciones**

Protege el cÃ³digo y el acceso a las aplicaciones en la nube.

Ejemplo:
WAF (Web Application Firewall) para evitar ataques en apps web.
Escaneo de cÃ³digo en Azure DevOps para detectar vulnerabilidades.

#### **7ï¸âƒ£ Seguridad de los Datos**

Protege la informaciÃ³n almacenada en bases de datos y archivos.

Ejemplo:
Cifrado de datos en reposo y en trÃ¡nsito con Azure Key Vault.
Backups automÃ¡ticos para recuperar datos en caso de ataque.

### **2.2. Seguridad Compartida**

A medida que una organizaciÃ³n traslada sus servicios a la nube, algunas responsabilidades se transfieren al proveedor. La seguridad es una de estas responsabilidades.

Al igual que ocurrÃ­a con la administraciÃ³n, la seguridad se convierte en una preocupaciÃ³n compartida entre los proveedores y los clientes de la nube.

La figura siguiente muestra las Ã¡reas de responsabilidad entre la organizaciÃ³n y Microsoft, segÃºn el tipo de servicio.

# ğŸ“Œ Modelo de Responsabilidad Compartida en Azure

| Responsabilidad                        | SaaS               | PaaS               | IaaS               | On-Premises         |
|----------------------------------------|--------------------|--------------------|--------------------|--------------------|
| **InformaciÃ³n y datos**                 | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        |
| **Dispositivos (MÃ³viles y PC)**         | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        |
| **Cuentas e identidades**               | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        |
| **Infraestructura de identidad y directorios** | ğŸŸ¦ Cliente | ğŸŸ¦ Cliente | ğŸŸ¦ Cliente | ğŸŸ¦ Cliente |
| **Aplicaciones**                        | âšª Microsoft      | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        |
| **Controles de red**                    | âšª Microsoft      | âšª Microsoft      | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        |
| **Sistema operativo**                   | âšª Microsoft      | âšª Microsoft      | ğŸŸ¦ Cliente        | ğŸŸ¦ Cliente        |
| **Hosts fÃ­sicos**                        | âšª Microsoft      | âšª Microsoft      | âšª Microsoft      | ğŸŸ¦ Cliente        |
| **Red fÃ­sica**                          | âšª Microsoft      | âšª Microsoft      | âšª Microsoft      | ğŸŸ¦ Cliente        |
| **Centro de datos fÃ­sico**              | âšª Microsoft      | âšª Microsoft      | âšª Microsoft      | ğŸŸ¦ Cliente        |

ğŸ“Œ **ExplicaciÃ³n**:
- ğŸŸ¦ **Responsabilidad del Cliente**.
- âšª **Responsabilidad de Microsoft**.
- **La responsabilidad varÃ­a segÃºn el servicio utilizado (SaaS, PaaS, IaaS o On-Premises).**
- **El cliente siempre mantiene el control sobre datos, identidades y dispositivos.**
- **Microsoft gestiona la infraestructura subyacente en la nube.**

### **2.3. Grupos de seguridad de red (NSG)**

Los grupos de seguridad de red (Network Security Groups, NSG) filtran el trÃ¡fico de red hacia y desde los recursos de Azure en redes virtuales de Azure. Sus principales caracterÃ­sticas son:

* Permiten establecer reglas de entrada y salida para filtrar por direcciÃ³n IP, puerto y protocolo de origen y destino.
* Se pueden aÃ±adir varias reglas, segÃºn sea necesario, dentro de los lÃ­mites de la suscripciÃ³n.
* Azure aplica las reglas de seguridad predeterminadas de lÃ­nea de base a los nuevos NSG.
* Las reglas de mayor prioridad anulan las reglas predeterminadas.

### **2.4. Grupos de seguridad de aplicaciones (ASG)**

Los grupos de seguridad de aplicaciones (Applications Security Groups) permiten configurar la seguridad de red como una extensiÃ³n natural de la estructura de una aplicaciÃ³n. Sus principales caracterÃ­sticas son:

* Permiten agrupar mÃ¡quinas virtuales y directivas de seguridad de red basadas en esos grupos.
* Se pueden reutilizar las directivas de seguridad a escala sin necesidad de modificar manualmente direcciones IP.

Con grupos de seguridad de aplicaciones se pueden habilitar o denegar determinados trÃ¡ficos desde y hacia las interfaces de red pertenecientes al ASG.

### **2.5. Azure Firewall**

Azure Firewall es un Firewall como servicio (FaaS) con estado y administrado que permite o deniega el acceso a los servidores en funciÃ³n de la direcciÃ³n IP de origen para proteger los recursos de la red. Sus principales caracterÃ­sticas son:

* Permite aplicar reglas de filtrado de trÃ¡fico de entrada y de salida.
* Alta disponibilidad.
* Escalabilidad ilimitada que aporta la nube.
* Utiliza el registro de Azure Monitor.

Por otro lado, Azure tambiÃ©n ofrece un servicio de firewall de aplicaciones web (Web Application Firewall, WAF) denominado Azure Application Gateway. Este servicio de WAF ofrece una protecciÃ³n centralizada del trÃ¡fico entrante para aplicaciones web.

### **2.6. ProtecciÃ³n contra la denegaciÃ³n de servicio distribuida (DDoS)**

Los ataques DDoS saturan y agotan los recursos de la red, motivando que las aplicaciones vayan lentas o bien dejen de responder.

La protecciÃ³n contra DDoS en Azure corrige el trÃ¡fico de red no deseado antes de que afecte a la disponibilidad del servicio. Azure DDoS Protection proporciona dos niveles de servicio:

* **BÃ¡sico**, que estÃ¡ habilitado automÃ¡ticamente sin coste como parte de la suscripciÃ³n. Garantiza que la infraestructura de Azure no se vea afectada por un ataque DDoS a gran escala.
* **EstÃ¡ndar**, que ofrece El nivel de servicio estÃ¡ndar aÃ±ade capacidades de mitigaciÃ³n, ajustadas para proteger los recursos de Azure Virtual Network.

Ambas modalidades proporcionan supervisiÃ³n continua del trÃ¡fico y mitigaciÃ³n en tiempo real de los ataques a nivel de red mÃ¡s comunes.

**Los tipos de ataques que ayuda a evitar DDoS Protection son:**

* **Ataques volumÃ©tricos,** cuyo objetivo es desbordar la capa de red con una gran cantidad de trÃ¡fico aparentemente legÃ­timo.
* **Ataques de protocolo** que vuelven un destino inaccesible al aprovechar una vulnerabilidad en la pila de protocolo de capa 3 y 4.
* **Ataques a nivel de recurso** (nivel de aplicaciÃ³n) aplicaciones web para interrumpir la transmisiÃ³n de datos entre hosts. Para la defensa contra este tipo de ataque DDoS Protection estÃ¡ndar requiere un firewall de aplicaciones web (WAF).

En la secciÃ³n Â«A fondoÂ» dispones de recursos con mÃ¡s informaciÃ³n sobre

### **2.7. Defensa en profundidad revisada**

Para conseguir una defensa en profundidad es posible combinar diferentes soluciones de seguridad en cada capa.

AsÃ­, la combinaciÃ³n de grupos de seguridad de red (NSG) con Azure Firewall posibilita una defensa en profundidad en la capa de red. De este modo la capa de red solo permite que el trÃ¡fico pase entre los recursos de la red con reglas de entrada y salida del grupo de seguridad de red (NSG).

Por otro lado, la capa perÃ­metro protege los lÃ­mites de sus redes con Azure DDoS Protection y Azure Firewall.

El anÃ¡lisis de las soluciones de seguridad de redes de Azure en cada una de las capas estÃ¡ fuera del Ã¡mbito de esta preparaciÃ³n.
